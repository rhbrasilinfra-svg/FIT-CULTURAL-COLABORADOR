<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avalia√ß√£o de Ader√™ncia Cultura - Brasil Infra</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e8eef5 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
        }
        
        /* CORES OFICIAIS BRASIL INFRA */
        :root {
            --azul-principal: #2B4366;
            --azul-escuro: #1e2f4d;
            --amarelo: #F2C029;
            --cinza-claro: #E5E5E5;
            --cinza-medio: #999999;
            --cinza-escuro: #666666;
            --preto: #000000;
        }
        
        /* Tela de Instru√ß√µes */
        .instructions-screen {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
        }
        
        /* Cabe√ßalho */
        .header-banner {
            background: linear-gradient(135deg, var(--azul-principal) 0%, var(--azul-escuro) 100%);
            padding: 48px 40px;
            border-radius: 12px;
            margin-bottom: 32px;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }
        
        .header-banner::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 200px;
            height: 200px;
            background: rgba(242, 192, 41, 0.1);
            border-radius: 50%;
            transform: translate(50%, -50%);
        }
        
        .header-title {
            font-size: 42px;
            font-weight: 900;
            letter-spacing: -1px;
            margin-bottom: 12px;
            color: var(--amarelo);
            text-transform: uppercase;
            position: relative;
        }
        
        .header-company {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
            position: relative;
        }
        
        .header-tagline {
            font-size: 18px;
            font-weight: 400;
            opacity: 0.9;
            position: relative;
        }
        
        /* Campos de identifica√ß√£o */
        .identification-section {
            background: #f8fafc;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            border-left: 4px solid var(--azul-principal);
        }
        
        .identification-section h2 {
            color: var(--azul-principal);
            font-size: 20px;
            margin-bottom: 16px;
            font-weight: 700;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-group label {
            display: block;
            color: #475569;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: var(--azul-principal);
            box-shadow: 0 0 0 3px rgba(43, 67, 102, 0.1);
        }
        
        .about-section {
            background: #f8fafc;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
            border-left: 4px solid var(--azul-principal);
        }
        
        .about-section h2 {
            color: var(--azul-principal);
            font-size: 20px;
            margin-bottom: 16px;
            font-weight: 700;
        }
        
        .about-section p {
            color: #475569;
            line-height: 1.7;
            margin-bottom: 12px;
        }
        
        .values-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }
        
        .value-badge {
            background: white;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            font-size: 14px;
            color: var(--azul-principal);
            border-left: 4px solid;
        }
        
        .value-badge:nth-child(1) { border-left-color: var(--azul-principal); }
        .value-badge:nth-child(2) { border-left-color: #ef4444; }
        .value-badge:nth-child(3) { border-left-color: #10b981; }
        .value-badge:nth-child(4) { border-left-color: var(--amarelo); }
        .value-badge:nth-child(5) { border-left-color: #9333ea; }
        
        .warning-box {
            background: #fffbeb;
            border-left: 4px solid var(--amarelo);
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
        }
        
        .warning-box h3 {
            color: #d97706;
            font-size: 20px;
            margin-bottom: 16px;
        }
        
        .warning-box ul {
            list-style: none;
            padding: 0;
        }
        
        .warning-box li {
            padding: 8px 0 8px 28px;
            position: relative;
            color: #78350f;
            line-height: 1.6;
        }
        
        .warning-box li::before {
            content: '‚úì';
            position: absolute;
            left: 0;
            color: var(--amarelo);
            font-weight: 700;
            font-size: 18px;
        }
        
        .warning-box .highlight {
            background: #fef3c7;
            padding: 16px;
            border-radius: 6px;
            margin-top: 16px;
            font-weight: 700;
            color: #78350f;
            text-align: center;
            font-size: 16px;
        }
        
        .privacy-box {
            background: #f0f9ff;
            border-left: 4px solid #3b82f6;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
        }
        
        .privacy-box h3 {
            color: #1e40af;
            font-size: 18px;
            margin-bottom: 16px;
        }
        
        .privacy-box p {
            color: #1e3a8a;
            line-height: 1.6;
            margin-bottom: 12px;
            font-size: 14px;
        }
        
        /* Checkbox LGPD */
        .lgpd-checkbox {
            background: #fef3c7;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 24px;
            border-left: 4px solid var(--amarelo);
        }
        
        .lgpd-checkbox label {
            display: flex;
            align-items: flex-start;
            cursor: pointer;
            color: #78350f;
            font-weight: 600;
            line-height: 1.6;
        }
        
        .lgpd-checkbox input[type="checkbox"] {
            margin-right: 12px;
            margin-top: 4px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .btn {
            background: var(--azul-principal);
            color: white;
            border: none;
            padding: 16px 32px;
            font-size: 16px;
            font-weight: 700;
            border-radius: 8px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background: var(--azul-escuro);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(43, 67, 102, 0.3);
        }
        
        .btn:disabled {
            background: var(--cinza-medio);
            cursor: not-allowed;
            opacity: 0.5;
            transform: none;
        }
        
        /* Tela de Teste */
        .test-screen {
            display: none;
        }
        
        .phase-card {
            background: white;
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            margin-bottom: 20px;
        }
        
        .phase-header {
            background: linear-gradient(135deg, var(--azul-principal) 0%, var(--azul-escuro) 100%);
            color: white;
            padding: 24px;
            border-radius: 12px;
            margin-bottom: 24px;
            text-align: center;
        }
        
        .phase-title {
            color: white;
            font-size: 28px;
            margin-bottom: 12px;
            font-weight: 800;
        }
        
        .phase-description {
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 0;
            line-height: 1.6;
            font-size: 16px;
        }
        
        .selection-info {
            background: #f1f5f9;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
            border-left: 4px solid var(--amarelo);
        }
        
        .selection-counter {
            font-size: 18px;
            font-weight: 700;
            color: var(--azul-principal);
        }
        
        .selection-counter .current {
            color: var(--azul-principal);
            font-size: 24px;
        }
        
        .selection-counter .required {
            color: #64748b;
        }
        
        .words-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin-bottom: 24px;
        }
        
        .word-item {
            padding: 14px 18px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
            font-weight: 600;
            color: #334155;
            user-select: none;
        }
        
        .word-item:hover {
            border-color: var(--azul-principal);
            background: #f8fafc;
            transform: translateY(-2px);
        }
        
        .word-item.selected {
            background: var(--azul-principal);
            color: white;
            border-color: var(--azul-principal);
        }
        
        /* Tela de Resultados */
        .results-screen {
            display: none;
        }
        
        /* Mensagem de sucesso (substitui aviso de baixa confiabilidade) */
        .success-message {
            background: #dcfce7;
            border-left: 4px solid #10b981;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 24px;
            text-align: center;
        }
        
        .success-message h3 {
            color: #166534;
            font-size: 22px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }
        
        .success-message p {
            color: #15803d;
            line-height: 1.6;
            font-size: 16px;
        }
        
        /* Classifica√ß√£o de Ader√™ncia */
        .metrics-card {
            background: linear-gradient(135deg, var(--azul-principal) 0%, var(--azul-escuro) 100%);
            color: white;
            border-radius: 16px;
            padding: 32px;
            margin-bottom: 24px;
            text-align: center;
        }
        
        .metric-value {
            font-size: 64px;
            font-weight: 900;
            margin-bottom: 8px;
        }
        
        .metric-label {
            font-size: 20px;
            font-weight: 700;
            opacity: 0.95;
        }
        
        .metric-description {
            font-size: 16px;
            opacity: 0.95;
            margin-top: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .metric-emoji {
            font-size: 24px;
        }
        
        /* Perfis (SEM BOLINHAS) */
        .profile-section {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            margin-bottom: 24px;
        }
        
        .profile-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--azul-principal);
            margin-bottom: 20px;
        }
        
        .value-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #f1f5f9;
        }
        
        .value-item:last-child {
            border-bottom: none;
        }
        
        .value-name {
            font-size: 14px;
            font-weight: 600;
            color: #334155;
            flex: 1;
        }
        
        .value-bar-container {
            flex: 1;
            margin: 0 16px;
        }
        
        .value-bar-bg {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        
        .value-bar-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .value-percentage {
            font-size: 14px;
            font-weight: 700;
            color: #334155;
            min-width: 40px;
            text-align: right;
        }
        
        /* Sugest√µes */
        .suggestions-section {
            background: white;
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
            margin-bottom: 24px;
        }
        
        .suggestions-title {
            font-size: 22px;
            font-weight: 800;
            color: var(--azul-principal);
            margin-bottom: 24px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .suggestion-card {
            background: #f8fafc;
            border-left: 4px solid #3b82f6;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 16px;
        }
        
        .suggestion-card.warning {
            border-left-color: var(--amarelo);
            background: #fffbeb;
        }
        
        .suggestion-card.danger {
            border-left-color: #ef4444;
            background: #fef2f2;
        }
        
        .suggestion-value {
            font-size: 16px;
            font-weight: 700;
            color: var(--azul-principal);
            margin-bottom: 12px;
        }
        
        .suggestion-list {
            list-style: none;
            padding: 0;
        }
        
        .suggestion-list li {
            padding: 8px 0 8px 24px;
            position: relative;
            font-size: 14px;
            line-height: 1.6;
            color: #475569;
        }
        
        .suggestion-list li::before {
            content: '‚Üí';
            position: absolute;
            left: 0;
            color: #3b82f6;
            font-weight: 700;
        }
        
        /* Rodap√© */
        .footer {
            background: white;
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            margin-top: 32px;
            box-shadow: 0 4px 16px rgba(0,0,0,0.08);
        }
        
        .footer-logo {
            font-size: 20px;
            font-weight: 800;
            color: var(--azul-principal);
            margin-bottom: 8px;
        }
        
        .footer-tagline {
            color: #64748b;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .values-grid {
                grid-template-columns: 1fr;
            }
            
            .words-grid {
                grid-template-columns: 1fr;
            }
            
            .header-title {
                font-size: 32px;
            }
            
            .header-company {
                font-size: 22px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- TELA 1: Instru√ß√µes -->
        <div class="instructions-screen" id="instructionsScreen">
            <div class="header-banner">
                <div class="header-title">AVALIA√á√ÉO DE ADER√äNCIA CULTURA</div>
                <div class="header-company">Brasil Infra</div>
                <div class="header-tagline">Construindo Progresso com Voc√™</div>
            </div>
            
            <!-- Se√ß√£o de Identifica√ß√£o -->
            <div class="identification-section">
                <h2>üë§ Identifica√ß√£o</h2>
                <div class="form-group">
                    <label for="nomeInput">Nome Completo *</label>
                    <input type="text" id="nomeInput" placeholder="Digite seu nome completo" required>
                </div>
                <div class="form-group">
                    <label for="cpfInput">CPF *</label>
                    <input type="text" id="cpfInput" placeholder="000.000.000-00" maxlength="14" required>
                </div>
            </div>
            
            <div class="about-section">
                <h2>üìã Sobre a Brasil Infra</h2>
                <p>
                    A <strong>Brasil Infra</strong> √© uma empresa comprometida com o desenvolvimento de infraestrutura 
                    sustent√°vel e inovadora no Brasil. Nossa miss√£o √© construir o progresso do pa√≠s atrav√©s de projetos 
                    que transformam comunidades e geram valor para a sociedade.
                </p>
                <p>
                    <strong>Nossa cultura organizacional √© baseada em 5 valores fundamentais:</strong>
                </p>
                <div class="values-grid">
                    <div class="value-badge">üí™ Comprometimento</div>
                    <div class="value-badge">ü¶∫ Trabalho Seguro</div>
                    <div class="value-badge">üå± Ambiente Saud√°vel</div>
                    <div class="value-badge">üéØ Foco no Resultado</div>
                    <div class="value-badge">üöÄ Mentalidade de Crescimento</div>
                </div>
            </div>
            
            <div class="about-section">
                <h2>üéØ Objetivo desta Avalia√ß√£o</h2>
                <p>
                    Esta avalia√ß√£o tem como objetivo identificar o seu grau de alinhamento com os valores culturais 
                    da Brasil Infra. Os resultados ser√£o utilizados para:
                </p>
                <ul style="list-style: none; padding: 0; margin-top: 12px;">
                    <li style="padding: 8px 0 8px 24px; position: relative;">
                        <span style="position: absolute; left: 0;">‚úì</span>
                        Identificar oportunidades de desenvolvimento pessoal e profissional
                    </li>
                    <li style="padding: 8px 0 8px 24px; position: relative;">
                        <span style="position: absolute; left: 0;">‚úì</span>
                        Adequar sua posi√ß√£o √†s suas caracter√≠sticas naturais
                    </li>
                    <li style="padding: 8px 0 8px 24px; position: relative;">
                        <span style="position: absolute; left: 0;">‚úì</span>
                        Promover um ambiente de trabalho mais saud√°vel e produtivo
                    </li>
                    <li style="padding: 8px 0 8px 24px; position: relative;">
                        <span style="position: absolute; left: 0;">‚úì</span>
                        Fortalecer a cultura organizacional da empresa
                    </li>
                </ul>
            </div>
            
            <div class="warning-box">
                <h3>‚è±Ô∏è Instru√ß√µes Importantes</h3>
                <ul>
                    <li>Reserve pelo menos <strong>6-7 minutos</strong> para completar o teste</li>
                    <li>Leia cada palavra com aten√ß√£o e reflita sobre seu significado</li>
                    <li>Escolha as palavras que melhor representam voc√™ (Fase 1) e como voc√™ age no trabalho (Fase 2)</li>
                    <li>N√£o h√° respostas certas ou erradas, seja honesto e genu√≠no</li>
                </ul>
                <div class="highlight">
                    ‚è∞ Tempo m√©dio esperado: 6 minutos
                </div>
            </div>
            
            <div class="privacy-box">
                <h3>üîí Pol√≠tica de Privacidade e Uso de Dados</h3>
                <p><strong>Coleta e Uso de Dados:</strong> As informa√ß√µes fornecidas nesta avalia√ß√£o ser√£o utilizadas 
                exclusivamente para fins de an√°lise de ader√™ncia cultural e desenvolvimento profissional.</p>
                <p><strong>Prote√ß√£o de Dados:</strong> Seus dados pessoais ser√£o tratados conforme a Lei Geral de 
                Prote√ß√£o de Dados (LGPD - Lei n¬∫ 13.709/2018). Seus dados n√£o ser√£o compartilhados com terceiros sem 
                sua autoriza√ß√£o expressa.</p>
                <p><strong>Confidencialidade:</strong> Os resultados individuais s√£o confidenciais e ser√£o compartilhados 
                apenas com voc√™ e com a √°rea de Recursos Humanos da Brasil Infra.</p>
            </div>
            
            <div class="lgpd-checkbox">
                <label>
                    <input type="checkbox" id="lgpdCheckbox">
                    <span>Li e aceito a Pol√≠tica de Privacidade e autorizo o tratamento dos meus dados conforme a LGPD</span>
                </label>
            </div>
            
            <button class="btn" id="startBtn" onclick="startTest()" disabled>üöÄ Iniciar Avalia√ß√£o</button>
        </div>
        
        <!-- TELA 2: Teste -->
        <div class="test-screen" id="testScreen">
            <div class="phase-card">
                <div class="phase-header">
                    <h2 class="phase-title" id="phaseTitle">Fase 1: Perfil Natural</h2>
                    <p class="phase-description" id="phaseDescription">
                        Escolha entre 10 e 20 palavras que melhor descrevem <strong>quem voc√™ √© naturalmente</strong>, 
                        sem pensar no ambiente de trabalho. Seja genu√≠no.
                    </p>
                </div>
                
                <div class="selection-info">
                    <div class="selection-counter">
                        <span class="current" id="selectionCount">0</span>
                        <span class="required"> / 10-20 palavras selecionadas</span>
                    </div>
                </div>
                
                <div class="words-grid" id="wordsGrid"></div>
                
                <button class="btn" id="nextBtn" onclick="nextPhase()" disabled>
                    Pr√≥xima Fase
                </button>
            </div>
        </div>
        
        <!-- TELA 3: Resultados -->
        <div class="results-screen" id="resultsScreen">
            <!-- Mensagem de Sucesso (sempre vis√≠vel) -->
            <div class="success-message">
                <h3>
                    <span>‚úÖ</span>
                    <span>Avalia√ß√£o Conclu√≠da com Sucesso!</span>
                </h3>
                <p>O RH j√° recebeu seu resultado e entrar√° em contato em breve.</p>
            </div>
            
            <div class="metrics-card">
                <div class="metric-value" id="aderenciaValue">--</div>
                <div class="metric-label">Ader√™ncia Cultural</div>
                <div class="metric-description">
                    <span id="aderenciaEmoji"></span>
                    <span id="aderenciaDesc">--</span>
                </div>
            </div>
            
            <div class="profile-section">
                <h2 class="profile-title">Perfil Natural (Quem voc√™ √©)</h2>
                <div id="naturalProfile"></div>
            </div>
            
            <div class="profile-section">
                <h2 class="profile-title">Perfil Adaptado (Como voc√™ age)</h2>
                <div id="adaptedProfile"></div>
            </div>
            
            <div class="suggestions-section">
                <h2 class="suggestions-title">üí° Sugest√µes Personalizadas</h2>
                <div id="suggestionsContainer"></div>
            </div>
            
            <!-- Rodap√© -->
            <div class="footer">
                <div class="footer-logo">BRASIL INFRA</div>
                <div class="footer-tagline">Construindo Progresso com Voc√™</div>
            </div>
        </div>
    </div>

    <script>
        const VALUES = {
            'Comprometimento': '#2B4366',
            'Trabalho Seguro': '#ef4444',
            'Ambiente Saud√°vel': '#10b981',
            'Foco no Resultado': '#F2C029',
            'Mentalidade de Crescimento': '#9333ea'
        };
        
        const WORDS_DATABASE = {
            'Comprometimento': {
                positive: ['Dedicado', 'Respons√°vel', 'Engajado', 'Leal', 'Confi√°vel', 'Pontual', 'Presente', 'Persistente', 'Focado'],
                negative: ['Descompromissado', 'Negligente', 'Desinteressado', 'Ausente', 'Inconsistente', 'Irregular', 'Disperso', 'Inconstante']
            },
            'Trabalho Seguro': {
                positive: ['Cauteloso', 'Precavido', 'Atento', 'Cuidadoso', 'Vigilante', 'Consciente', 'Prudente', 'Criterioso', 'Protetor'],
                negative: ['Descuidado', 'Imprudente', 'Negligente', 'Arriscado', 'Inconsequente', 'Irrespons√°vel', 'Temer√°rio', 'Desatento']
            },
            'Ambiente Saud√°vel': {
                positive: ['Colaborativo', 'Emp√°tico', 'Respeitoso', 'Amig√°vel', 'Harmonioso', 'Solid√°rio', 'Gentil', 'Acolhedor', 'Positivo'],
                negative: ['Conflituoso', 'Indiferente', 'Hostil', 'Isolado', 'Negativo', 'Grosseiro', 'Cr√≠tico', 'Desrespeitoso']
            },
            'Foco no Resultado': {
                positive: ['Produtivo', 'Determinado', 'Objetivo', 'Eficiente', 'Orientado', 'Realizador', 'Incisivo', 'Competitivo', 'Ambicioso'],
                negative: ['Improdutivo', 'Procrastinador', 'Disperso', 'Lento', 'Desorganizado', 'Ineficiente', 'Acomodado', 'Negligente']
            },
            'Mentalidade de Crescimento': {
                positive: ['Curioso', 'Aprendiz', 'Adapt√°vel', 'Inovador', 'Flex√≠vel', 'Aberto', 'Proativo', 'Evolutivo', 'Criativo'],
                negative: ['R√≠gido', 'Resistente', 'Conformado', 'Estagnado', 'Fechado', 'Reativo', 'Limitado', 'Inflex√≠vel']
            }
        };
        
        let testState = {
            nome: '',
            cpf: '',
            startTime: null,
            phase: 1,
            phase1Selections: [],
            phase2Selections: [],
            currentWords: []
        };
        
        // M√°scara CPF
        document.getElementById('cpfInput').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length <= 11) {
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d)/, '$1.$2');
                value = value.replace(/(\d{3})(\d{1,2})$/, '$1-$2');
                e.target.value = value;
            }
        });
        
        // Habilitar bot√£o
        function checkFormValidity() {
            const nome = document.getElementById('nomeInput').value.trim();
            const cpf = document.getElementById('cpfInput').value.trim();
            const lgpd = document.getElementById('lgpdCheckbox').checked;
            
            document.getElementById('startBtn').disabled = !(nome && cpf.length >= 14 && lgpd);
        }
        
        document.getElementById('nomeInput').addEventListener('input', checkFormValidity);
        document.getElementById('cpfInput').addEventListener('input', checkFormValidity);
        document.getElementById('lgpdCheckbox').addEventListener('change', checkFormValidity);
        
        function startTest() {
            testState.nome = document.getElementById('nomeInput').value.trim();
            testState.cpf = document.getElementById('cpfInput').value.trim();
            testState.startTime = Date.now();
            
            document.getElementById('instructionsScreen').style.display = 'none';
            document.getElementById('testScreen').style.display = 'block';
            window.scrollTo(0, 0);
            
            loadPhase1();
        }
        
        function generateWords() {
            let allWords = [];
            Object.keys(WORDS_DATABASE).forEach(value => {
                WORDS_DATABASE[value].positive.forEach(word => {
                    allWords.push({ word, value, valence: 'positive' });
                });
                WORDS_DATABASE[value].negative.forEach(word => {
                    allWords.push({ word, value, valence: 'negative' });
                });
            });
            return allWords.sort(() => Math.random() - 0.5);
        }
        
        function loadPhase1() {
            testState.currentWords = generateWords();
            renderWords();
        }
        
        function loadPhase2() {
            testState.phase = 2;
            testState.currentWords = generateWords();
            
            document.getElementById('phaseTitle').textContent = 'Fase 2: Perfil Adaptado';
            document.getElementById('phaseDescription').innerHTML = 
                'Agora escolha entre 10 e 20 palavras que melhor descrevem <strong>como voc√™ age no ambiente de trabalho</strong>. Pense em como voc√™ se comporta profissionalmente.';
            
            document.getElementById('selectionCount').textContent = '0';
            document.getElementById('nextBtn').textContent = 'Ver Resultados';
            document.getElementById('nextBtn').disabled = true;
            
            window.scrollTo(0, 0);
            renderWords();
        }
        
        function renderWords() {
            const grid = document.getElementById('wordsGrid');
            grid.innerHTML = '';
            
            testState.currentWords.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'word-item';
                div.textContent = item.word;
                div.dataset.index = index;
                div.onclick = () => toggleWord(index);
                grid.appendChild(div);
            });
        }
        
        function toggleWord(index) {
            const selections = testState.phase === 1 ? testState.phase1Selections : testState.phase2Selections;
            const wordElement = document.querySelector(`[data-index="${index}"]`);
            
            if (selections.includes(index)) {
                selections.splice(selections.indexOf(index), 1);
                wordElement.classList.remove('selected');
            } else {
                if (selections.length >= 20) {
                    alert('‚ö†Ô∏è Voc√™ j√° selecionou 20 palavras (m√°ximo permitido)');
                    return;
                }
                selections.push(index);
                wordElement.classList.add('selected');
            }
            
            updateSelectionCounter();
        }
        
        function updateSelectionCounter() {
            const count = testState.phase === 1 ? 
                testState.phase1Selections.length : 
                testState.phase2Selections.length;
            
            document.getElementById('selectionCount').textContent = count;
            document.getElementById('nextBtn').disabled = count < 10 || count > 20;
        }
        
        function nextPhase() {
            if (testState.phase === 1) {
                loadPhase2();
            } else {
                calculateResults();
            }
        }
        
        function calculateResults() {
            const totalTime = Math.floor((Date.now() - testState.startTime) / 1000);
            
            const phase1Scores = calculateScoresByValue(testState.phase1Selections);
            const phase2Scores = calculateScoresByValue(testState.phase2Selections);
            
            // Calcular porcentagens de palavras positivas e negativas
            const phase1Details = calculateWordPercentages(testState.phase1Selections);
            const phase2Details = calculateWordPercentages(testState.phase2Selections);
            
            const aderenciaScore = Math.round(
                Object.values(phase2Scores).reduce((a, b) => a + b, 0) / 5
            );
            
            const isReliable = totalTime >= 180;
            
            // Enviar para Formspree
            sendToFormspree({
                nome: testState.nome,
                cpf: testState.cpf,
                tempoTotal: totalTime,
                aderenciaScore,
                phase1Scores,
                phase2Scores,
                phase1Details,
                phase2Details,
                isReliable
            });
            
            displayResults({
                aderenciaScore,
                phase1Scores,
                phase2Scores,
                totalTime,
                isReliable
            });
        }
        
        function calculateWordPercentages(selections) {
            const details = {};
            
            Object.keys(VALUES).forEach(value => {
                details[value] = {
                    positivas: 0,
                    negativas: 0,
                    totalSelecionadas: 0
                };
            });
            
            selections.forEach(index => {
                const item = testState.currentWords[index];
                const value = item.value;
                const valence = item.valence;
                
                details[value].totalSelecionadas++;
                
                if (valence === 'positive') {
                    details[value].positivas++;
                } else {
                    details[value].negativas++;
                }
            });
            
            // Calcular porcentagens
            Object.keys(details).forEach(value => {
                const total = details[value].totalSelecionadas;
                if (total > 0) {
                    details[value].porcentagemPositivas = Math.round((details[value].positivas / total) * 100);
                    details[value].porcentagemNegativas = Math.round((details[value].negativas / total) * 100);
                } else {
                    details[value].porcentagemPositivas = 0;
                    details[value].porcentagemNegativas = 0;
                }
            });
            
            return details;
        }
        
        function calculateScoresByValue(selections) {
            const scores = {};
            Object.keys(VALUES).forEach(v => scores[v] = 0);
            
            selections.forEach(index => {
                const item = testState.currentWords[index];
                const valence = item.valence;
                
                if (valence === 'positive') {
                    scores[item.value] += 10;
                } else {
                    scores[item.value] -= 10;
                }
            });
            
            Object.keys(scores).forEach(v => {
                scores[v] = Math.max(0, Math.min(100, 50 + scores[v]));
            });
            
            return scores;
        }
        
        // Enviar para Formspree - ENDPOINT CORRETO
        async function sendToFormspree(data) {
            const minutes = Math.floor(data.tempoTotal / 60);
            const seconds = data.tempoTotal % 60;
            
            const formData = {
                nome: data.nome,
                cpf: data.cpf,
                data: new Date().toLocaleString('pt-BR'),
                tempoTotal: `${minutes}min ${seconds}s`,
                confiabilidade: {
                    nivel: data.isReliable ? 'Alta Confiabilidade' : 'Baixa Confiabilidade',
                    score: data.aderenciaScore
                },
                scoreGeral: `${data.aderenciaScore}% - ${getAderenciaLevel(data.aderenciaScore)}`,
                
                // Fase 1 - Perfil Natural
                fase1_comprometimento: {
                    score: `${data.phase1Scores['Comprometimento']}%`,
                    positivas: `${data.phase1Details['Comprometimento'].porcentagemPositivas}%`,
                    negativas: `${data.phase1Details['Comprometimento'].porcentagemNegativas}%`
                },
                fase1_trabalhoSeguro: {
                    score: `${data.phase1Scores['Trabalho Seguro']}%`,
                    positivas: `${data.phase1Details['Trabalho Seguro'].porcentagemPositivas}%`,
                    negativas: `${data.phase1Details['Trabalho Seguro'].porcentagemNegativas}%`
                },
                fase1_ambienteSaudavel: {
                    score: `${data.phase1Scores['Ambiente Saud√°vel']}%`,
                    positivas: `${data.phase1Details['Ambiente Saud√°vel'].porcentagemPositivas}%`,
                    negativas: `${data.phase1Details['Ambiente Saud√°vel'].porcentagemNegativas}%`
                },
                fase1_focoResultado: {
                    score: `${data.phase1Scores['Foco no Resultado']}%`,
                    positivas: `${data.phase1Details['Foco no Resultado'].porcentagemPositivas}%`,
                    negativas: `${data.phase1Details['Foco no Resultado'].porcentagemNegativas}%`
                },
                fase1_mentalidadeCrescimento: {
                    score: `${data.phase1Scores['Mentalidade de Crescimento']}%`,
                    positivas: `${data.phase1Details['Mentalidade de Crescimento'].porcentagemPositivas}%`,
                    negativas: `${data.phase1Details['Mentalidade de Crescimento'].porcentagemNegativas}%`
                },
                
                // Fase 2 - Perfil Adaptado
                fase2_comprometimento: {
                    score: `${data.phase2Scores['Comprometimento']}%`,
                    positivas: `${data.phase2Details['Comprometimento'].porcentagemPositivas}%`,
                    negativas: `${data.phase2Details['Comprometimento'].porcentagemNegativas}%`
                },
                fase2_trabalhoSeguro: {
                    score: `${data.phase2Scores['Trabalho Seguro']}%`,
                    positivas: `${data.phase2Details['Trabalho Seguro'].porcentagemPositivas}%`,
                    negativas: `${data.phase2Details['Trabalho Seguro'].porcentagemNegativas}%`
                },
                fase2_ambienteSaudavel: {
                    score: `${data.phase2Scores['Ambiente Saud√°vel']}%`,
                    positivas: `${data.phase2Details['Ambiente Saud√°vel'].porcentagemPositivas}%`,
                    negativas: `${data.phase2Details['Ambiente Saud√°vel'].porcentagemNegativas}%`
                },
                fase2_focoResultado: {
                    score: `${data.phase2Scores['Foco no Resultado']}%`,
                    positivas: `${data.phase2Details['Foco no Resultado'].porcentagemPositivas}%`,
                    negativas: `${data.phase2Details['Foco no Resultado'].porcentagemNegativas}%`
                },
                fase2_mentalidadeCrescimento: {
                    score: `${data.phase2Scores['Mentalidade de Crescimento']}%`,
                    positivas: `${data.phase2Details['Mentalidade de Crescimento'].porcentagemPositivas}%`,
                    negativas: `${data.phase2Details['Mentalidade de Crescimento'].porcentagemNegativas}%`
                },
                
                _replyto: 'rhbrasilinfra@gmail.com'
            };
            
            try {
                await fetch('https://formspree.io/f/mldonlyk', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });
            } catch (error) {
                console.error('Erro ao enviar formul√°rio:', error);
            }
        }
        
        function displayResults(data) {
            document.getElementById('testScreen').style.display = 'none';
            document.getElementById('resultsScreen').style.display = 'block';
            window.scrollTo(0, 0);
            
            const {nivel, emoji} = getAderenciaClassification(data.aderenciaScore);
            document.getElementById('aderenciaValue').textContent = data.aderenciaScore + '%';
            document.getElementById('aderenciaEmoji').textContent = emoji;
            document.getElementById('aderenciaDesc').textContent = nivel;
            
            renderProfile('naturalProfile', data.phase1Scores);
            renderProfile('adaptedProfile', data.phase2Scores);
            renderSuggestions(data.phase2Scores);
        }
        
        function getAderenciaClassification(score) {
            if (score > 81) return { nivel: 'Forte Ader√™ncia', emoji: 'üü¢' };
            if (score >= 61) return { nivel: 'Ader√™ncia Moderada', emoji: 'üîµ' };
            if (score >= 41) return { nivel: 'Ader√™ncia Leve', emoji: 'üü°' };
            if (score >= 21) return { nivel: 'Ader√™ncia Neutra', emoji: 'üî¥' };
            return { nivel: 'Associa√ß√£o Negativa', emoji: '‚ö´' };
        }
        
        function getAderenciaLevel(score) {
            if (score > 81) return 'Forte Ader√™ncia';
            if (score >= 61) return 'Ader√™ncia Moderada';
            if (score >= 41) return 'Ader√™ncia Leve';
            if (score >= 21) return 'Ader√™ncia Neutra';
            return 'Associa√ß√£o Negativa';
        }
        
        function renderProfile(elementId, scores) {
            const container = document.getElementById(elementId);
            container.innerHTML = '';
            
            const sorted = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            
            sorted.forEach(([value, score]) => {
                const color = VALUES[value];
                container.innerHTML += `
                    <div class="value-item">
                        <div class="value-name">${value}</div>
                        <div class="value-bar-container">
                            <div class="value-bar-bg">
                                <div class="value-bar-fill" style="width: ${score}%; background: ${color};"></div>
                            </div>
                        </div>
                        <div class="value-percentage">${score}%</div>
                    </div>
                `;
            });
        }
        
        function renderSuggestions(scores) {
            const container = document.getElementById('suggestionsContainer');
            container.innerHTML = '';
            
            let hasLowScores = false;
            
            // Primeiro mostrar valores que precisam de aten√ß√£o
            Object.entries(scores).forEach(([value, score]) => {
                if (score < 61) {
                    hasLowScores = true;
                    const cssClass = score >= 41 ? 'warning' : 'danger';
                    const emoji = score >= 41 ? '‚ö†Ô∏è' : '‚ùå';
                    const level = score >= 41 ? 'Requer Aten√ß√£o' : 'Cr√≠tico';
                    
                    container.innerHTML += `
                        <div class="suggestion-card ${cssClass}">
                            <div class="suggestion-value">${emoji} ${value} (${score}% - ${level})</div>
                            <ul class="suggestion-list">
                                ${getSuggestionsForValue(value, 'improve').map(s => `<li>${s}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                }
            });
            
            // Sempre mostrar sugest√µes de continuidade da cultura
            container.innerHTML += `
                <div class="suggestion-card" style="border-left-color: #10b981; background: #f0fdf4;">
                    <div class="suggestion-value" style="color: #166534;">‚úÖ Continue Alinhado com Nossa Cultura</div>
                    <ul class="suggestion-list">
                        <li>Participe ativamente de projetos que ergam hist√≥rias e construam o futuro do Brasil</li>
                        <li>Mantenha o compromisso com a excel√™ncia na execu√ß√£o de obras complexas</li>
                        <li>Colabore com a equipe mantendo seguran√ßa, comprometimento e foco em resultados</li>
                        <li>Contribua para um ambiente saud√°vel onde juventude e maturidade se entrela√ßam</li>
                        <li>Seja agente da nossa miss√£o: Executar os maiores projetos de infraestrutura do Brasil</li>
                    </ul>
                </div>
            `;
        }
        
        function getSuggestionsForValue(value, type) {
            const suggestions = {
                'Comprometimento': [
                    'Alinhe seus objetivos pessoais com a miss√£o de construir o progresso do Brasil',
                    'Demonstre mais engajamento nas entregas e prazos do projeto',
                    'Participe ativamente das reuni√µes e decis√µes da equipe'
                ],
                'Trabalho Seguro': [
                    'Priorize SEMPRE a seguran√ßa acima de prazos e custos',
                    'Utilize todos os EPIs obrigat√≥rios em todas as atividades',
                    'Participe dos treinamentos de seguran√ßa e DDS',
                    'Reporte imediatamente qualquer situa√ß√£o de risco'
                ],
                'Ambiente Saud√°vel': [
                    'Pratique mais escuta ativa e empatia com colegas',
                    'Contribua para um ambiente onde juventude e maturidade se entrela√ßam',
                    'Participe das integra√ß√µes e confraterniza√ß√µes da equipe',
                    'Demonstre respeito e colabora√ß√£o em todas as intera√ß√µes'
                ],
                'Foco no Resultado': [
                    'Estabele√ßa metas claras e mensur√°veis para suas entregas',
                    'Organize melhor seu tempo priorizando o que gera mais valor',
                    'Busque sempre a satisfa√ß√£o do cliente nas obras entregues',
                    'Mantenha o compromisso com prazos e qualidade'
                ],
                'Mentalidade de Crescimento': [
                    'Reserve tempo para desenvolvimento profissional cont√≠nuo',
                    'Busque feedback regularmente e aplique melhorias',
                    'Demonstre abertura para aprender novas t√©cnicas e processos',
                    'Encare desafios como oportunidades de crescimento'
                ]
            };
            
            return suggestions[value] || ['Continue se desenvolvendo neste valor'];
        }
        
        console.log('Sistema Brasil Infra carregado!');
    </script>
</body>
</html>
